<!DOCTYPE html>
<html>

<head>
    <title>Car Wash :: Home</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script src="https://kit.fontawesome.com/79ec480f66.js" crossorigin="anonymous"></script>
</head>

<style>
    .make_center {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        font-family: "Helvetica";
    }

    #chat_btn {
        position: fixed;
        right: 50px;
        bottom: 50px;
        width: 50px;
        height: 50px;
    }

    .chat_btn {
        display: none;
    }

    #chat_btn:hover {
        cursor: pointer;
    }

    .close {
        width: 50px;
        height: 50px;
        position: absolute;
        right: 35px;
        top: -5px;
        z-index: 1;
        background-image: url("https://s1.daumcdn.net/cfs.tistory/custom/blog/204/2048858/skin/images/close.png");
        background-size: 50%;
        background-repeat: no-repeat;
        background-position: center;
        cursor: pointer;
    }

    #menu {
        width: 350px;
        height: 100%;
        position: fixed;
        top: 0px;
        right: -352px;
        z-index: 10;
        border: 1px solid #c9c9c9;
        background-color: white;
        text-align: center;
        transition: All 0.2s ease;
        -webkit-transition: All 0.2s ease;
        -moz-transition: All 0.2s ease;
        -o-transition: All 0.2s ease;
    }

    #menu.open {
        right: 0px;
    }

    .table_div {
        max-height: 500px;
        overflow-y: scroll;
        width: 100%;
    }

    .top_rating_div {
        width: 100%;
        height: 500px;
        
        align-items: flex-end;

    }

    .top_rating_div_element {
        display: flex;
        align-items: center;
        flex-direction: column;

    }

    .height {
        height: 100%;
    }

    .ele {
        position: absolute;
        bottom: 0;
    }
</style>

<body>
    <!-- header -->
    <script>
        let selected_val = $('#sel option:selected').val();
    </script>
    <div class="jumbotron text-center mb-0">
        <h1>
            <a href="/" style="text-decoration: none; color: gray;">
                Foambble Bobble Car Wash
            </a>
        </h1>
        <p>전국 셀프세차인에게 유용한 정보들과 세차인들간의 커뮤니케이션을 위한 사이트</p>
    </div>
    <nav class="navbar navbar-expand-sm navbar-dark bg-dark">
        <a href="/" class="navbar-brand">Foambble Bobble</a>
        <!-- Toggle Button -->
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavbar">
            <ul class="navbar-nav">
                <li class="nav-item"><a href="#" class="nav-link">공지사항</a></li>
                <li class="nav-item"><a href="#" class="nav-link">갤러리</a></li>
                <li class="nav-item"><a href="#" class="nav-link">앨범</a></li>
            </ul>
        </div>
    </nav>

    <!-- content -->
    <div class="container pt-3">
        <div class="row">
            <!-- left content -->
            <div class="col-sm-4">
                <h2>About Foambble Bobble</h2>
                <p>코딩온 웹프로젝트 6조</p>
                <img src="/static/img/carwash_img1.jpg" class="img-fluid rounded">
                <p>세차좋아요</p>
                <hr>
                <!-- side menu (link) -->
                <h3>사이드 메뉴</h3>
                <p>이웃 홈페이지를 통해 세차 소식을 즐겨보세요!</p>
                <ul class="list-group">
                    <li class="list-group-item list-group-item-action"><a href="#">세차 폼</a></li>
                    <li class="list-group-item list-group-item-action"><a href="#">경기북부가 세차왕이야!</a></li>
                    <li class="list-group-item list-group-item-action"><a href="#">세린이모임</a></li>
                </ul>
                <hr>
                <h3>오늘의 세차장</h3>
                <div class="card" style="width: 100%;">
                    <img src="/static/img/carwash_img1.jpg" class="card-img-top" alt="...">
                    <div class="card-body">
                      <p class="card-text">
                        소개될 주차장을 지역별로 보세요!
                      </p>
                    </div>
                  </div>
            </div>
            <!-- right content -->
            <div class="make_center col-sm-8">
                <select id="sel" class="form-select" aria-label="Default select example" style="width: 100%;">
                    <option selected>Open this select menu</option>
                    <% for (var i=0; i<region.length; i++) { %>
                        <option value="<%=region[i]%>">
                            <%=region[i]%>
                        </option>
                        <% } %>
                </select>
                <div class="top_rating_div row">

                    <div class="col-4 top_rating_div_element height" style="">
                        <div class="test">2티어</div>
                        <img src="/static/img/siver_medal.png" class="img-fluid rounded" style="position:relative;top:70px;  height:200px">
                        <div class="tear" style="position:relative; top:130px; font-size: larger;"></div>
                        <!-- <div class="ele"
                            style="height: 150px; background-color:silver;width:100%; display:flex; justify-content:center;">
                            <i class="fa-solid fa-medal fa-5x"></i>
                        </div> -->
                    </div>
                    <div class="col-4 top_rating_div_element height" style="">
                        <i class="fa-solid fa-crown fa-rotate-45"></i>

                        <div class="test">1티어</div>
                        <img src="/static/img/gold_medal.png" class="img-fluid rounded" style="position:relative;top:70px; height:200px">
                        <div class="tear" style="font-size: larger;position:relative; top:120px;">
                            지역을 선택해주세요!
                        </div>
                        <!-- <div class="ele"
                            style="height: 200px; background-color:silver;width:100%;display:flex; justify-content:center;">
                            <i class="fa-solid fa-medal fa-5x"></i>
                        </div> -->
                    </div>
                    <div class="col-4 top_rating_div_element height" style="">
                        <div class="test">3티어</div>
                        <img src="/static/img/bronze_medal.png" class="img-fluid rounded" style="position:relative;top:70px; height:200px">
                        <div class="tear" style="font-size: larger; position:relative; top:130px;"></div>
                        <!-- <div class="ele"
                            style="height: 100px; background-color:silver; width:100%;display:flex; justify-content:center;">
                            <i class="fa-solid fa-medal fa-5x"></i>
                        </div> -->
                    </div>
                </div>
                <div class="row" style="width: 100%; border:1px solid black; border-radius:5px">
                    <div class="col-3" style="font-size:20px; position:reletive; ">
                        순위
                    </div>
                    <div class="col-5" style="font-size:20px; position:reletive; ">
                        이름
                    </div>
                    <div class="col-2" style="font-size:20px; position:reletive; ">
                        좋아요
                    </div>
                    <div class="col-2" style="font-size:20px; position:reletive; ">
                        싫어요
                    </div>
                </div>

                <!-- <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th class="col-xs-3" scope="col">순위</th>
                            <th class="col-xs-3" scope="col">이름</th>
                            <th class="col-xs-3" scope="col">좋아요</th>
                            <th class="col-xs-3" scope="col">싫어요</th>
                        </tr>
                    </thead>
                    <tbody class="app_sel" style="height: 200px; o">

                    </tbody>
                </table> -->
                <div class="table_div">
                    <table class="table table-striped table-hover">
                        <tbody class="app_sel">

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- footer -->
    <div class="jumbotron text-center mt-5 mb-0">
        <h3 class="text-secondary">Foambble Bobble</h3>
        <p>Foambble Bobble Homepage is Designed by <span class="text-primary">6 group</span></p>
    </div>


    <div id="menu">
        <div class="close"></div>
        <div class="container">
            <img id="chat_btn" src="/static/img/chatimg.png" alt="">
            <iframe id="chat" src="https://service.dongledongle.com/carwashchat" frameborder="0" width="100%"
                height="900vh"></iframe>
        </div>
    </div>
    <% var aaaaaa=JSON.stringify(car_washer_name)%>
        <% var aaaaaa1=JSON.stringify(ranking_index)%>
            <% var aaaaaa2=JSON.stringify(rating)%>



                <!-- --------------------------------------------------------------------------------------------------------------->
                <script>

                    var car_washer_name = '<%-aaaaaa%>';
                    var ranking_index = '<%-aaaaaa1%>';
                    var ranking_rating = '<%-aaaaaa2%>';
                    console.log($(".card-text"));
                    var c = JSON.parse(car_washer_name);
                    var r = JSON.parse(ranking_index);
                    var r_r = JSON.parse(ranking_rating);

                    let local;
                    //console.log($(".tear")[0]);
                    $("#sel").change(function () {
                        local = $(this).val()

                        var html = "";
                        for (let index = 0; index < 20; index++) {
                            html += `<tr>
                    <th style="width:20%" scope="row">
                        ${index + 1}
                    </th>
                    <td style="width:50% ;">
                        ${c[local][r[local][index]]}
                    </td>
                    <td>${r_r[[local]][r[local][index]]["like"]}</td>
                    <td>${r_r[[local]][r[local][index]]["dislike"]}</td>
                </tr>`

                        }
                        $(".app_sel").html(html)
                        $(".tear")[0].textContent=`${c[local][r[local][1]]}`;
                        $(".tear")[1].textContent=`${c[local][r[local][0]]}`;
                        $(".tear")[2].textContent=`${c[local][r[local][2]]}`;
                        $(".card-text").text(`${c[local][r[local][0]]} 오늘의 최고 goat`)
                    })
                    // 버튼 클릭시 우측에서 슬라이드 나오면서 버튼은 사라짐
                    $("#chat_btn").click(function () {
                        $("#menu").addClass("open");
                        $("#chat_btn").addClass("chat_btn");

                    });
                    // X버튼 클릭시 슬라이드 들어가면서 버튼은 생성됨
                    $(".close").click(function () {
                        $("#menu").removeClass("open");
                        $("#chat_btn").removeClass("chat_btn");
                    });
        //값선택
                </script>

</body>

</html>